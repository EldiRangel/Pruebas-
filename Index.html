<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>App de Finanzas</title>
    <style>
        body { font-family: Arial, sans-serif; margin:20px; }
        button { cursor:pointer; }
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
                 background: rgba(0,0,0,0.5); justify-content:center; align-items:center; }
        .modal-oculto { display:none; }
        .modal form { background:#fff; padding:20px; border-radius:8px; display:flex; flex-direction:column; gap:10px; }
        .item-lista, .item-categoria { display:grid; grid-template-columns:1fr 1fr 1fr 1fr 1fr 100px; 
                                       align-items:center; padding:6px; border-bottom:1px solid #ddd; }
        .item-categoria { grid-template-columns: auto 1fr 100px; padding:4px 0; border-left:4px solid; margin-bottom:4px; }
        .item-categoria-color { width:16px; height:16px; border-radius:50%; display:inline-block; margin-right:6px; }
        .filtro { margin-right:6px; padding:4px 8px; cursor:pointer; border:1px solid #ccc; border-radius:4px; }
        .filtro.activo { background:#3498db; color:#fff; border-color:#2980b9; }
        #lista-movimientos, #lista-categorias { margin-top:10px; list-style:none; padding:0; }
    </style>
</head>
<body>

<h1>Dashboard de Finanzas</h1>

<!-- BOTONES PRINCIPALES -->
<div style="margin-bottom:20px;">
    <button id="btn-nuevo-mov">Nuevo Movimiento</button>
    <button id="btn-presupuesto">Presupuestos</button>
</div>

<!-- FILTROS MOVIMIENTOS -->
<div style="margin-bottom:10px;">
    <select id="filtro-tipo">
        <option value="todos">Todos</option>
        <option value="ingreso">Ingresos</option>
        <option value="gasto">Gastos</option>
    </select>

    <select id="filtro-categoria">
        <option value="todas">Todas las categorías</option>
    </select>

    <input type="text" id="buscar-mov" placeholder="Buscar descripción">
</div>

<!-- LISTA DE MOVIMIENTOS -->
<ul id="lista-movimientos"></ul>
<div id="mov-vacio" style="display:none;">No hay movimientos</div>

<hr>

<h2>Categorías</h2>

<!-- FILTROS CATEGORÍAS -->
<div style="margin-bottom:10px;">
    <span class="filtro activo" data-filtro="todas">Todas</span>
    <span class="filtro" data-filtro="ingreso">Ingresos</span>
    <span class="filtro" data-filtro="gasto">Gastos</span>
</div>

<!-- LISTA DE CATEGORÍAS -->
<ul id="lista-categorias"></ul>
<div id="vacio-categorias" style="display:none;">No hay categorías</div>

<hr>

<!-- MODAL NUEVO MOVIMIENTO -->
<div id="modal-transaccion" class="modal modal-oculto">
    <form id="form-transaccion">
        <label>Tipo:</label>
        <select id="tipo-mov">
            <option value="ingreso">Ingreso</option>
            <option value="gasto">Gasto</option>
        </select>

        <label>Monto:</label>
        <input type="number" id="monto-mov" placeholder="Monto">

        <label>Fecha:</label>
        <input type="date" id="fecha-mov">

        <label>Categoría:</label>
        <select id="categoria-mov"></select>

        <label>Descripción:</label>
        <input type="text" id="descripcion-mov" placeholder="Descripción">

        <div style="display:flex; gap:10px;">
            <button type="submit">Guardar</button>
            <button type="button" id="cerrar-modal">Cancelar</button>
        </div>
    </form>
</div>

<!-- MODAL PRESUPUESTOS -->
<div id="modal-presupuesto" class="modal modal-oculto">
    <div style="background:#fff; padding:20px; border-radius:8px; width:300px; position:relative;">
        <button id="cerrar-presupuesto" style="position:absolute; top:8px; right:8px;">X</button>
        <h3>Presupuestos</h3>
        <p>Aquí va la gestión de presupuestos...</p>
    </div>
</div>

<!-- SCRIPTS -->
<script src="db.js"></script>
<script src="categorias.js"></script>
<script src="movimientos.js"></script>

<script>
    // BOTÓN PRESUPUESTOS
    document.addEventListener('DOMContentLoaded', () => {
        const btnPres = document.getElementById('btn-presupuesto');
        const modalPres = document.getElementById('modal-presupuesto');
        const cerrarPres = document.getElementById('cerrar-presupuesto');

        btnPres?.addEventListener('click', () => modalPres.classList.remove('modal-oculto'));
        cerrarPres?.addEventListener('click', () => modalPres.classList.add('modal-oculto'));
    });
</script>

</body>
</html>
